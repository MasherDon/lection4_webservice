# Python WSGI

**WSGI** (англ. Web Server Gateway Interface) — стандарт взаимодействия между **Python**-программой, выполняющейся на стороне сервера, и самим веб-сервером.

В Python существует большое количество различного рода веб-фреймворков (каркасов), тулкитов и библиотек с уникальными методами установки и настройки. **WSGI** предоставляет простой интерфейс между ними.

По стандарту, **WSGI**-приложение должно удовлетворять следующим требованиям:

1. должно быть вызываемым **(callable)** объектом (обычно это функция или метод)
2. принимать два параметра: словарь переменных окружения **(environ)** и обработчик запроса **(start_response)**
3. вызывать обработчик запроса с кодом HTTP-ответа и HTTP-заголовками
4. возвращать итерируемый объект с телом ответа

Простейшим примером WSGI-приложения может служить такая функция-генератор:

```python
 def simplest_wsgi_app(environ, start_response):
     start_response('200 OK', [('Content-Type', 'text/plain')])
     yield 'Hello, world!'
```

  
Помимо приложений и серверов, стандарт дает определение **middleware**-компонентов, предоставляющих интерфейсы как приложению, так и серверу. **То есть для сервера middleware является приложением, а для приложения — сервером.** Это позволяет составлять **«цепочки»** **WSGI**-совместимых **middleware**. **Middleware** - простая обертка над объектом приложения, реализовать её можно через замыкание.

**Middleware** могут брать на себя следующие функции (но не ограничиваются этим):

1. обработка сессий
2. аутентификация/авторизация
3. управление URL (маршрутизация запросов)
4. балансировка нагрузки
5. пост-обработка выходных данных (например, проверка на валидность)
6. изменение заголовков

<!-- _footer: Python Enhancement Proposal, определяющий стандарт интерфейса. [Электронный ресурс]. https://www.python.org/dev/peps/pep-3333/ (дата обращения: 28.03.2020)-->
